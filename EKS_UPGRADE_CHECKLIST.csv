Category,Task,Status,Notes
Before Upgrade,Cluster running on EKS 1.33,,
Before Upgrade,All workloads healthy,,
Before Upgrade,Backup critical configurations,,
Before Upgrade,kubectl updated to v1.34+ (match cluster version),,
Before Upgrade,Verify current cluster version: aws eks describe-cluster --name <cluster_name> --query cluster.version,,
Before Upgrade,Check node versions: kubectl get nodes -o wide,,
Before Upgrade,Verify all pods are healthy: kubectl get pods --all-namespaces,,
Before Upgrade,Check Karpenter version: kubectl get deployment -n karpenter karpenter -o jsonpath='{.spec.template.spec.containers[0].image}',,
Before Upgrade,Open AWS Console → EKS → Your Cluster → Observability dashboard → Upgrade insights tab,,
Before Upgrade,Click Refresh insights to get current status,,
Before Upgrade,Verify Amazon Linux 2 compatibility insight shows Passing,,
Before Upgrade,Verify kube-proxy version skew insight shows Passing,,
Before Upgrade,Verify EKS add-on version compatibility insight shows Passing,,
Before Upgrade,Verify Cluster health issues insight shows Passing,,
Before Upgrade,Verify Kubelet version skew insight shows Passing,,
Before Upgrade,Update terraform.tfvars: kubernetes_version = 1.34,,
Before Upgrade,Update addons.tf: Karpenter chart_version = 1.6.0,,
Before Upgrade,Run terraform plan -out=tfplan,,
Before Upgrade,Review plan: EKS cluster version updates to 1.34,,
Before Upgrade,Review plan: Karpenter Helm release upgrades to 1.6.0,,
Before Upgrade,Review plan: EKS managed addons upgrade to 1.34-compatible versions,,
Before Upgrade,Review plan: Managed node groups use 1.34 AMI,,
During Upgrade,Run terraform apply tfplan,,
During Upgrade,Monitor control plane upgrade (~6 minutes),,
During Upgrade,Monitor Karpenter upgrade (~2-3 minutes),,
During Upgrade,Monitor addons upgrade (~1-2 minutes each),,
During Upgrade,Monitor worker nodes upgrade (~15 minutes),,
After Upgrade,Check cluster version: aws eks describe-cluster --name <cluster_name> --query cluster.version (should show 1.34),,
After Upgrade,Verify API server is accessible: kubectl get nodes,,
After Upgrade,Check Karpenter version: kubectl get deployment -n karpenter karpenter -o jsonpath='{.spec.template.spec.containers[0].image}',,
After Upgrade,Verify upgrade in AWS Console: EKS → Cluster → Update history tab shows Successful,,
After Upgrade,Check all pods are running: kubectl get pods --all-namespaces,,
After Upgrade,Verify addon versions: kubectl get daemonset -n kube-system kube-proxy -o jsonpath='{.spec.template.spec.containers[0].image}',,
After Upgrade,Verify CoreDNS version: kubectl get deployment -n kube-system coredns -o jsonpath='{.spec.template.spec.containers[0].image}',,
After Upgrade,Check node versions: kubectl get nodes -o custom-columns=NAME:.metadata.name,VERSION:.status.nodeInfo.kubeletVersion (all should show v1.34.x),,
After Upgrade,Verify worker node AMI in AWS Console: EC2 instances show 1.34 AMI,,
After Upgrade,Check Karpenter status: kubectl get nodeclaims,,
After Upgrade,Check Karpenter NodePools: kubectl get nodepools,,
After Upgrade,Test workload scheduling: kubectl apply -f k8s/test-karpenter.yaml,,
After Upgrade,Verify test pod schedules successfully: kubectl get pods -w,,
After Upgrade,Check Karpenter logs for errors: kubectl logs -n karpenter -l app.kubernetes.io/name=karpenter,,
After Upgrade,Verify EKS Access Entry for Karpenter node role (AL2023 requirement),,
After Upgrade,Verify security groups allow communication,,
After Upgrade,Confirm CoreDNS version: v1.12.4-eksbuild.1,,
After Upgrade,Confirm kube-proxy version: v1.34.0-eksbuild.4,,
After Upgrade,Confirm VPC CNI version: v1.20.3-eksbuild.1,,
After Upgrade,Confirm Karpenter version: v1.6.0+,,
After Upgrade,Upgrade kubectl client if needed: kubectl version --client,,
